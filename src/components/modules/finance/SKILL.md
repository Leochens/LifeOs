---
name: 财务
description: 用于管理 LifeOS 家庭财务记账模块的斜杠命令技能。当用户使用 /财务 命令或提及记账、资产、负债时触发此技能。
---

# 财务技能

此技能用于通过 AI 辅助管理 LifeOS 家庭财务记账。

## 触发条件

- 用户输入 `/财务`
- 用户提及 "记账"、"资产"、"负债"、"净资产"
- 用户要求分析财务状况

## 可用命令

### 添加家庭成员

```
/财务 添加成员 [名称] [角色]
```

示例：
```
/财务 添加成员 "爸爸" "family"
```

### 录入资产记录

```
/财务 录入 [成员名称] [日期]
```

示例：
```
/财务 录入 "爸爸" 2025-01-15
```

### 查看资产总览

```
/财务 查看总览
/财务 查看 [成员名称] 的资产
```

### 对比分析

```
/财务 对比 [成员名称] 最近两次记录
/财务 资产趋势 [成员名称]
```

### 查看历史

```
/财务 历史 [成员名称]
/财务 历史 [成员名称] [月份]
```

## 数据存储

### 人员文件路径

```
{vault}/finance/{person-slug}.md
```

### Frontmatter 格式（人员）

```yaml
---
id: papa
name: 爸爸
role: family
created: 2025-01-01
updated: 2025-01-15
---
```

### 资产记录文件路径

```
{vault}/finance/records/{person-slug}/{YYYY-MM-DD}.md
```

### Frontmatter 格式（资产记录）

```yaml
---
person: 爸爸
date: 2025-01-15
liquid: 50000
fixed: 1000000
investment: 200000
receivable: 0
debt: 500000
---
```

## 资产分类说明

1. **流动资金 (liquid)** - 银行存款、现金、余额宝等
2. **固定资产 (fixed)** - 房产、车辆等
3. **投资理财 (investment)** - 股票、基金、理财产品等
4. **应收款 (receivable)** - 借出的钱、待收款项
5. **负债 (debt)** - 房贷、车贷、信用卡欠款等

## 计算公式

- **总资产** = 流动资金 + 固定资产 + 投资理财 + 应收款
- **净资产** = 总资产 - 负债
- **负债率** = 负债 / 总资产 * 100%

## AI 操作指南

### 读取人员列表

使用 `listNotes("{vault}/finance", false)` 读取所有人员文件，解析 frontmatter 获取成员信息。

### 读取资产记录

使用 `listNotes("{vault}/finance/records/{person-slug}", false)` 读取某个成员的所有资产记录。

### 创建新记录

使用 `writeNote` 写入新的资产记录文件，路径为 `{vault}/finance/records/{person-slug}/{YYYY-MM-DD}.md`。

## 注意事项

1. 人员文件和资产记录都使用 Markdown + frontmatter 格式
2. 录入资产时建议按流动资金、固定资产、投资理财、应收款、负债的顺序依次填写
3. 每次录入会自动更新人员文件的 `updated` 字段
4. 支持多角色记账，每个家庭成员独立管理
