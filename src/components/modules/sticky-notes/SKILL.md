---
name: 便利贴
description: 用于管理可视化便利贴白板的斜杠命令技能。当用户使用 /便利贴 命令或提及便签、白板时触发此技能。
---

# 便利贴技能

此技能用于通过 AI 辅助管理 LifeOS 中的可视化便利贴白板，支持自由布局、颜色分类和缩放操作。

## 触发条件

- 用户输入 `/便利贴` 或 `/sticky`
- 用户提及 "便签"、"便利贴"、"白板"、"记事贴"
- 用户要求创建或管理可视化笔记

## 可用命令

### 创建便利贴

```
/便利贴 创建 [内容]
/便利贴 新建 [颜色] 便利贴 [内容]
```

示例：
```
/便利贴 创建 记得买牛奶
/便利贴 新建 粉色 便利贴 明天开会
```

### 搜索便利贴

```
/便利贴 搜索 [关键词]
/便利贴 查找包含 [内容] 的便利贴
```

### 按颜色筛选

```
/便利贴 显示所有 [颜色] 便利贴
/便利贴 查看黄色便利贴
```

### 整理便利贴

```
/便利贴 一键排版
/便利贴 整理所有便利贴
/便利贴 重置视图
```

### 统计便利贴

```
/便利贴 统计
/便利贴 查看便利贴数量
```

## 颜色选项

- **yellow** - 黄色（默认）
- **pink** - 粉色
- **blue** - 蓝色
- **green** - 绿色
- **orange** - 橙色

## 数据存储

### 便利贴数据文件路径

```
{vault}/stickynotes/board.json
```

### 数据格式

```json
[
  {
    "id": "note-1234567890",
    "x": 100,
    "y": 100,
    "width": 200,
    "height": 160,
    "content": "便利贴内容",
    "color": "yellow",
    "rotation": -2.5,
    "created": "2025-01-15T10:30:00.000Z"
  }
]
```

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| id | string | 唯一标识符 |
| x | number | X 坐标位置 |
| y | number | Y 坐标位置 |
| width | number | 宽度（像素） |
| height | number | 高度（像素） |
| content | string | 便利贴内容 |
| color | string | 颜色（yellow/pink/blue/green/orange） |
| rotation | number | 旋转角度（-4 到 4 度） |
| created | string | 创建时间（ISO 8601） |

## AI 操作指南

### 读取便利贴

使用 `readFile("{vault}/stickynotes/board.json")` 读取所有便利贴数据。

### 创建便利贴

1. 读取现有的 board.json
2. 创建新的便利贴对象，计算合适的 x, y 坐标
3. 将新对象添加到数组
4. 使用 `writeFile` 保存更新后的数据

### 更新便利贴

1. 读取 board.json
2. 找到对应 id 的便利贴
3. 更新需要修改的字段
4. 保存更新后的数据

### 删除便利贴

1. 读取 board.json
2. 过滤掉要删除的便利贴（通过 id）
3. 保存更新后的数据

### 一键排版

将所有便利贴按网格排列：
- 每行 4 个便利贴
- 间距 30 像素
- 起始位置 (100, 100)

### 搜索便利贴

遍历所有便利贴，匹配 `content` 字段中包含关键词的便利贴。

## 交互操作

### 白板操作

- **拖拽画布** - 按住鼠标拖动空白区域
- **缩放** - 使用鼠标滚轮
- **双击** - 在双击位置创建新便利贴

### 便利贴操作

- **拖拽** - 拖动便利贴到新位置
- **编辑** - 点击便利贴内容区域进行编辑
- **删除** - 点击右上角的 x 按钮

## 注意事项

1. 便利贴数据以 JSON 格式存储，自动保存（500ms 防抖）
2. 旋转角度在 -4 到 4 度之间随机，模拟真实便利贴效果
3. 默认便利贴尺寸为 200x160 像素
4. 画布支持 0.3x 到 3x 的缩放范围
5. 编辑内容后需失去焦点才自动保存
